/* valerie - MIT license - (c) egrove Ltd (egrove.co.uk) */
var valerie={};(function(){"use strict";valerie.utils={};var e=valerie.utils;e.asArray=function(t){return e.isArray(t)?t:[t]},e.asFunction=function(t){return e.isFunction(t)?t:function(){return t}},e.isArray=function(e){return"[object Array]"==={}.toString.call(e)},e.isArrayOrObject=function(e){return null===e?!1:"object"==typeof e},e.isFunction=function(e){return null==e?!1:"function"==typeof e},e.isMissing=function(t){return null==t?!0:e.isString(t)?0===t.length:!1},e.isObject=function(t){return null===t?!1:e.isArray(t)?!1:"object"==typeof t},e.isString=function(e){return"[object String]"==={}.toString.call(e)},e.mergeOptions=function(t,n){var i,a,r={};null==t&&(t={}),null==n&&(n={});for(i in t)t.hasOwnProperty(i)&&(a=t[i],e.isArray(a)&&(a=a.slice(0)),r[i]=a);for(i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r}})(),function(){"use strict";valerie.formatting={};var e=valerie.formatting;e.addThousandsSeparator=function(e,t,n){var i=(""+e).split(n),a=i[0];return a=a.replace(/\B(?=(\d{3})+(?!\d))/g,t),i[0]=a,i.join(n)},e.pad=function(e,t,n){return e=""+e,e.length>=n?e:Array(n+1-e.length).join(t)+e},e.replacePlaceholders=function(e,t){return null==t&&(t={}),e.replace(/\{(\w+)\}/g,function(e,n){var i=t[n];return null==i?e:""+i})}}(),function(){"use strict";valerie.dom={};var e=/\s+/g,t=/^\s+|\s+$/g,n=valerie.dom;n.classNamesDictionaryToString=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&e[t]&&n.push(t);return n.sort(),n.join(" ")},n.classNamesStringToDictionary=function(n){var i,a,r={};if(null==n)return r;if(n=n.replace(t,""),0===n.length)return r;for(i=n.split(e),a=0;i.length>a;a++)r[i[a]]=!0;return r},n.setElementVisibility=function(e,t){var n="none"!==e.style.display;n!==t&&(e.style.display=t?"":"none")}}(),function(){"use strict";valerie.koExtras={},valerie.koExtras.isolatedBindingHandler=function(e,t){var n=1===arguments.length?function(){}:e;return t=2===arguments.length?t:e,{init:function(e,i,a,r,s){n(e,i,a,r,s),ko.computed({read:function(){t(e,i,a,r,s)},disposeWhenNodeIsRemoved:e})}}},valerie.koExtras.pausableComputed=function(e,t,n,i){var a,r,s;return r=null==i?ko.observable(!1):ko.utils.isSubscribable(i)?i:ko.observable(i),s=ko.computed(function(){return r()?a:e.call(t)},t,n),s.paused=ko.computed({read:function(){return r()},write:function(e){e&&(e=!0),e!==r()&&(e&&(a=s()),r(e))}}),s.refresh=function(){r()&&(r(!1),a=s(),r(!0))},s}}(),function(){"use strict";valerie.converters={},valerie.converters.passThrough={format:function(e){return null==e?"":""+e},parse:function(e){return e}}}(),function(){"use strict";var e={failed:{},passed:{},pending:{}};valerie.ValidationResult=function(t,n){null==n&&(n=""),this.state=t,this.message=n,this.failed=t===e.failed,this.passed=t===e.passed,this.pending=t===e.pending},valerie.ValidationResult.states=e,valerie.ValidationResult.passedInstance=new valerie.ValidationResult(e.passed),valerie.ValidationResult.pendingInstance=new valerie.ValidationResult(e.pending),valerie.ValidationResult.createFailedResult=function(t){return new valerie.ValidationResult(e.failed,t)}}(),function(){"use strict";valerie.validationState={};var e="validation",t=valerie.utils;valerie.validationState.findIn=function(e,n,i,a){1 in arguments||(n=!0),2 in arguments||(i=!1),3 in arguments||(a=[]);var r,s,u;for(r in e)if(e.hasOwnProperty(r)){if(u=e[r],null==u)continue;if(s=valerie.validationState.getFor(u),ko.isObservable(u)&&(u=u.peek()),t.isFunction(u))continue;t.isArrayOrObject(u)?(n&&s&&a.push(s),i&&valerie.validationState.findIn(u,n,!0,a)):s&&a.push(s)}return a},valerie.validationState.getFor=function(t){return null==t?null:t.hasOwnProperty(e)?t[e]():null},valerie.validationState.has=function(t){return null==t?!1:t.hasOwnProperty(e)},valerie.validationState.setFor=function(t,n){t[e]=function(){return n}}}(),function(){"use strict";var e={deferEvaluation:!0},t=valerie.utils,n=valerie.ValidationResult.passedInstance,i=valerie.ValidationResult.pendingInstance,a=ko.observable,r=ko.computed,s=function(){return this.result().failed},u=function(){var e,t,n,i=[],a=this.validationStates();for(n=0;a.length>n;n++)e=a[n],e.isApplicable()&&(t=e.result(),t.failed&&i.push(e));return i},l=function(){return this.result().message},o=function(){return this.result().passed},d=function(){return this.result().pending},c=function(){var e,t,n=[],i=this.validationStates();for(t=0;i.length>t;t++)e=i[t],e.isApplicable()&&e.result().pending&&n.push(e);return n},m=function(){return this.failedStates().length>0?valerie.ValidationResult.createFailedResult(this.settings.failureMessageFormat):this.pendingStates().length>0?i:n},f=function(){var e,t=this.validationStates();for(e=0;t.length>e;e++)if(t[e].touched())return!0;return!1},h=function(e){var t,n=this.validationStates();for(t=0;n.length>t;t++)n[t].touched(e)};valerie.ModelValidationState=function(n,i){i=t.mergeOptions(valerie.ModelValidationState.defaultOptions,i),i.applicable=t.asFunction(i.applicable),i.name=t.asFunction(i.name),this.failed=r(s,this,e),this.failedStates=r(u,this,e),this.message=r(l,this,e),this.model=n,this.passed=r(o,this,e),this.pending=r(d,this,e),this.pendingStates=r(c,this,e),this.result=valerie.koExtras.pausableComputed(m,this,e,i.paused),this.paused=this.result.paused,this.refresh=this.result.refresh,this.settings=i,this.getName=function(){return this.settings.name()},this.isApplicable=function(){return this.settings.applicable},this.summary=a([]),this.touched=r({read:f,write:h,deferEvaluation:!0,owner:this}),this.validationStates=ko.observableArray()},valerie.ModelValidationState.prototype={addValidationStates:function(e){return e=t.asArray(e),this.validationStates.push.apply(this.validationStates,e),this},applicable:function(e){return null==e&&(e=!0),this.settings.applicable=t.asFunction(e),this},clearSummary:function(e){var t,n,i;if(this.summary([]),e)for(t=this.validationStates(),i=0;t.length>i;i++)n=t[i],n.clearSummary&&n.clearSummary(!0);return this},end:function(){return this.model},includeInSummary:function(){return this.settings.excludeFromSummary=!1,this},name:function(e){return this.settings.name=t.asFunction(e),this},removeValidationStates:function(e){return e=t.asArray(e),this.validationStates.removeAll(e),this},startValidatingSubModel:function(e){return this.validationStates.push(e.validation()),this},stopValidatingSubModel:function(e){return this.validationStates.remove(e.validation()),this},updateSummary:function(e){var t,n,i=this.failedStates(),a=[];for(n=0;i.length>n;n++)t=i[n],t.settings.excludeFromSummary||a.push({name:t.getName(),message:t.message()});if(this.summary(a),e)for(i=this.validationStates(),n=0;i.length>n;n++)t=i[n],t.updateSummary&&t.updateSummary(!0);return this},validateAll:function(){var e=valerie.validationState.findIn(this.model,!0,!0);return this.addValidationStates(e),this},validateAllProperties:function(){var e=valerie.validationState.findIn(this.model,!1,!0);return this.addValidationStates(e),this},validateChildProperties:function(){var e=valerie.validationState.findIn(this.model,!1,!1);return this.addValidationStates(e),this},validateChildPropertiesAndSubModels:function(){var e=valerie.validationState.findIn(this.model,!0,!1);return this.addValidationStates(e),this}},valerie.ModelValidationState.defaultOptions={applicable:t.asFunction(!0),excludeFromSummary:!0,failureMessageFormat:"",name:t.asFunction("(?)"),paused:null},valerie.validatableModel=function(e,t){var n=new valerie.ModelValidationState(e,t);return valerie.validationState.setFor(e,n),n}}(),function(){"use strict";var e={deferEvaluation:!0},t=valerie.utils,n=valerie.formatting,i=valerie.koExtras,a=ko.observable,r=ko.computed,s=valerie.ValidationResult.passedInstance,u=function(e){var t=e.observableOrComputed(),n=e.settings.missingTest(t),i=e.settings.required();return n&&i?-1:n&&!i?0:1},l=function(e){var t,n,i,a=e.observableOrComputed(),r=e.settings.rules;for(i=0;r.length>i;i++)if(t=r[i],n=t.test(a),n.failed||n.pending)return n;return s},o=function(){return this.result().failed},d=function(){var e=this.result().message;return e=n.replacePlaceholders(e,{name:this.settings.name()})},c=function(){return this.result().passed},m=function(){return this.result().pending},f=function(){var e,t;return t=this.boundEntry.result(),t.failed?t:(e=u(this),-1===e?valerie.ValidationResult.createFailedResult(this.settings.missingFailureMessage):0===e?t:l(this))},h=function(){return this.settings.applicable()?this.touched()&&this.result().failed:!1};valerie.PropertyValidationState=function(n,u){u=t.mergeOptions(valerie.PropertyValidationState.defaultOptions,u),u.applicable=t.asFunction(u.applicable),u.name=t.asFunction(u.name),u.required=t.asFunction(u.required),this.boundEntry={focused:a(!1),result:a(s),textualInput:!1},this.failed=r(o,this,e),this.message=i.pausableComputed(d,this,e),this.passed=r(c,this,e),this.observableOrComputed=n,this.pending=r(m,this,e),this.result=r(f,this,e),this.settings=u,this.getName=function(){return this.settings.name()},this.isApplicable=function(){return this.settings.applicable()},this.showMessage=i.pausableComputed(h,this,e),this.touched=a(!1)},valerie.PropertyValidationState.prototype={addRule:function(e){return this.settings.rules.push(e),this},applicable:function(e){return null==e&&(e=!0),this.settings.applicable=t.asFunction(e),this},end:function(){var e,t,n=this.settings,i=n.valueFormat,a=n.rules;for(e=0;a.length>e;e++)t=a[e].settings,t.valueFormat=i;return this.observableOrComputed},entryFormat:function(e){return this.settings.entryFormat=e,this},excludeFromSummary:function(){return this.settings.excludeFromSummary=!0,this},name:function(e){return this.settings.name=t.asFunction(e),this},required:function(e){return null==e&&(e=!0),this.settings.required=t.asFunction(e),this},valueFormat:function(e){return this.settings.valueFormat=e,this}},valerie.PropertyValidationState.defaultOptions={applicable:t.asFunction(!0),converter:valerie.converters.passThrough,entryFormat:null,excludeFromSummary:!1,invalidEntryFailureMessage:"",missingFailureMessage:"",missingTest:t.isMissing,name:t.asFunction(),required:t.asFunction(!1),rules:[],valueFormat:null},valerie.validatableProperty=function(e,t){if(!ko.isSubscribable(e))throw"Only observables or computeds can be made validatable properties.";var n=new valerie.PropertyValidationState(e,t);return valerie.validationState.setFor(e,n),n}}(),function(){"use strict";ko.computed.fn.validate=function(e){return valerie.validatableProperty(this,e)}}(),function(){"use strict";ko.observable.fn.validate=function(e){return valerie.validatableProperty(this,e)}}(),function(){"use strict";var e=valerie.ValidationResult.passedInstance,t=valerie.utils,n=valerie.dom,i=n.setElementVisibility,a=valerie.converters,r=valerie.validationState.getFor,s=ko.bindingHandlers,u=ko.utils.registerEventHandler,l=valerie.koExtras.isolatedBindingHandler;(function(){var n=s.checked,i=s.value,a=function(e,t){var n=r(t);n.touched(!0),n.boundEntry.focused(!1),n.message.paused(!1),n.showMessage.paused(!1)},l=function(e,t){var n,i=r(t);i.boundEntry.result.peek().failed||(n=t.peek(),e.value=i.settings.converter.format(n,i.settings.entryFormat))},o=function(e,t){var n=r(t);n.boundEntry.focused(!0),n.message.paused(!0),n.showMessage.paused(!0)},d=function(t,n){var i,a=ko.utils.stringTrim(t.value),s=r(n),u=s.settings,l=e;0===a.length?(n(null),u.required()&&(l=valerie.ValidationResult.createFailedResult(u.missingFailureMessage))):(i=u.converter.parse(a),n(i),null==i&&(l=valerie.ValidationResult.createFailedResult(u.invalidEntryFailureMessage))),s.boundEntry.result(l)},c=function(t,n,i){var a=t();n.boundEntry.focused.peek()||(n.boundEntry.result(e),i.value=n.settings.converter.format(a,n.settings.entryFormat))};s.validatedChecked={init:function(e,i,s,l,o){var d=i(),c=r(d);n.init(e,i,s,l,o),c&&(u(e,"blur",function(){a(e,d)}),null==c.settings.name()&&(c.settings.name=t.asFunction(e.name)))},update:n.update},s.validatedValue={init:function(e,n,s,m,f){var h,v,g=n(),p=r(g);return p?(null==p.settings.name()&&(p.settings.name=t.asFunction(e.name)),u(e,"blur",function(){a(e,g)}),h=ko.utils.tagNameLower(e),(v="input"===h&&"text"===e.type.toLowerCase()||"textarea"===h)?(p.boundEntry.textualInput=!0,u(e,"blur",function(){l(e,g)}),u(e,"focus",function(){o(e,g)}),u(e,"keyup",function(){d(e,g)}),ko.computed({read:function(){c(g,p,e)},disposeWhenNodeIsRemoved:e}),void 0):(i.init(e,n,s,m,f),void 0)):(i.init(e,n,s,m,f),void 0)},update:function(e,t,n,a,s){var u=t(),l=r(u);l&&l.boundEntry.textualInput||i.update(e,t,n,a,s)}}})(),function(){var e=function(e,t,n,i,a){var s,u=i(),l=n();l===!0&&(l=u.value||u.checked||u.validatedValue||u.validatedChecked||a),s=r(l),s&&e(s,l,u)};s.disabledWhenNotValid=l(function(t,n,i,a){var r=function(e){t.disabled=!e.passed()};e(r,t,n,i,a)}),s.disabledWhenTouchedAndNotValid=l(function(t,n,i,a){var r=function(e){t.disabled=e.touched()&&!e.passed()};e(r,t,n,i,a)}),s.enabledWhenApplicable=l(function(t,n,i,a){var r=function(e){t.disabled=!e.settings.applicable()};e(r,t,n,i,a)}),s.formattedValue=l(function(e,t,n){var i,s=n(),u=t(),l=ko.utils.unwrapObservable(u),o=r(u),d=a.passThrough.format;o&&(d=o.settings.converter.format,i=o.settings.valueFormat),d=s.formatter||d,null==i&&(i=s.valueFormat),ko.utils.setTextContent(e,d(l,i))}),s.validationCss=l(function(t,i,a,r){var u=function(e){var i=s.validationCss.classNames,a=t.className,r=n.classNamesStringToDictionary(a),u=e.failed(),l=!1,o=e.passed(),d=e.pending(),c=e.touched(),m=!c;e.boundEntry&&e.boundEntry.focused()&&(l=!0),r[i.failed]=u,r[i.focused]=l,r[i.passed]=o,r[i.pending]=d,r[i.touched]=c,r[i.untouched]=m,t.className=n.classNamesDictionaryToString(r)};e(u,t,i,a,r)}),s.validationCss.classNames={failed:"failed",focused:"focused",passed:"passed",pending:"pending",touched:"touched",untouched:"untouched"},s.validationMessage=l(function(t,n,a,r){var s=function(e){i(t,e.showMessage()),ko.utils.setTextContent(t,e.message())};e(s,t,n,a,r)}),s.validationMessageText=l(function(t,n,i,a){var r=function(e){ko.utils.setTextContent(t,e.message())};e(r,t,n,i,a)}),s.visibleWhenFocused=l(function(t,n,a,r){var s=function(e){i(t,e.focused())};e(s,t,n,a,r)}),s.visibleWhenInvalid=l(function(t,n,a,r){var s=function(e){i(t,e.failed())};e(s,t,n,a,r)}),s.visibleWhenSummaryNotEmpty=l(function(t,n,a,r){var s=function(e){i(t,e.summary().length>0)};e(s,t,n,a,r)}),s.visibleWhenTouched=l(function(t,n,a,r){var s=function(e){i(t,e.touched())};e(s,t,n,a,r)}),s.visibleWhenUntouched=l(function(t,n,a,r){var s=function(e){i(t,!e.touched())};e(s,t,n,a,r)}),s.visibleWhenValid=l(function(t,n,a,r){var s=function(e){i(t,e.passed())};e(s,t,n,a,r)})}()}(),function(){"use strict";var e=ko.bindingHandlers.checked,t=ko.bindingHandlers.value;valerie.koBindingsHelper={useOriginalBindingHandlers:function(){ko.bindingHandlers.checked=e,ko.bindingHandlers.value=t},useValidatingBindingHandlers:function(){ko.bindingHandlers.checked=ko.bindingHandlers.validatedChecked,ko.bindingHandlers.value=ko.bindingHandlers.validatedValue}}}(),function(){"use strict";var e=valerie.formatting,t=function(e,t){var n=t.indexOf("C")>-1,i=t.indexOf(",")>-1,a=t.indexOf("."),r=0;return a===t.length-1?r=null:a>-1&&(r="c"===t.charAt(a+1)?e.settings.currencyMinorUnitPlaces:Number(t.substr(a+1))),{includeCurrencySign:n,includeThousandsSeparator:i,numberOfDecimalPlaces:r}};valerie.NumericHelper=function(){},valerie.NumericHelper.prototype={init:function(e,t,n,i){var a="\\d+(\\"+t+"\\d{3})*",r="(\\"+n+")?"+a,s=r+"(\\"+e+"\\d{"+i+"})?",u=a+"(\\"+e+"\\d+)?";return this.settings={decimalSeparator:e,thousandsSeparator:t,currencySign:n,currencyMinorUnitPlaces:i},this.expressions={currencyMajor:RegExp("^"+r+"$"),currencyMajorMinor:RegExp("^"+s+"$"),"float":RegExp("^"+u+"$"),integer:RegExp("^"+a+"$")},this},addThousandsSeparator:function(t){var n=this.settings;return e.addThousandsSeparator(t,n.thousandsSeparator,n.decimalSeparator)},format:function(e,n){if(null==e)return"";null==n&&(n="");var i=this.settings,a=t(this,n),r=a.numberOfDecimalPlaces,s=0>e;return s&&(e=-e),e=null!=r?e.toFixed(r):""+e,e=e.replace(".",i.decimalSeparator),a.includeThousandsSeparator&&(e=this.addThousandsSeparator(e)),(s?"-":"")+(a.includeCurrencySign?i.currencySign:"")+e},isCurrencyMajor:function(e){return this.expressions.currencyMajor.test(e)},isCurrencyMajorMinor:function(e){return this.expressions.currencyMajorMinor.test(e)},isFloat:function(e){return this.expressions.float.test(e)},isInteger:function(e){return this.expressions.integer.test(e)},parse:function(e){return e=this.unformat(e),Number(e)},unformat:function(e){var t=this.settings;return e=e.replace(t.currencySign,""),e=e.replace(t.thousandsSeparator,""),e=e.replace(t.decimalSeparator,".")}}}(),function(){"use strict";var e=new valerie.NumericHelper,t=/^(\d\d?)(?:\-|\/)(\d\d?)(?:\-|\/)(\d\d\d\d)$/,n=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,i=valerie.formatting.pad,a=valerie.converters=valerie.converters||{};a.date={format:function(e){if(null==e)return"";var t,n;return a.date.monthBeforeDate?(t=e.getMonth()+1,n=e.getDate()):(t=e.getDate(),n=e.getMonth()+1),i(t,"0",2)+"/"+i(n,"0",2)+"/"+e.getFullYear()},parse:function(e){if(null==e)return null;var n=e.match(t);if(null==n)return null;var i,r,s=parseInt(n[1],10),u=parseInt(n[2],10),l=parseInt(n[3],10);return a.date.monthBeforeDate?(i=u,r=s):(i=s,r=u),r--,e=new Date(l,r,i),e.getFullYear()!==l||e.getMonth()!==r||e.getDate()!==i?null:e},monthBeforeDate:!1},a.defaultNumericHelper=e,a.currencyMajor={format:function(e,t){return a.currency.numericHelper.format(e,t)},parse:function(e){var t=a.currency.numericHelper;return t.isCurrencyMajor(e)?t.parse(e):null}},a.currencyMajorMinor={format:function(e,t){return a.currency.numericHelper.format(e,t)},parse:function(e){var t=a.currency.numericHelper;return t.isCurrencyMajorMinor(e)?t.parse(e):null}},a.currency={numericHelper:e},a.email={format:function(e){return null==e?"":e},parse:function(e){return null==e?null:n.test(e)?e.toLowerCase():null}},a.float={format:function(e,t){return a.float.numericHelper.format(e,t)},parse:function(e){var t=a.float.numericHelper;return t.isFloat(e)?t.parse(e):null}},a.float.numericHelper=e,a.integer={format:function(e,t){return a.integer.numericHelper.format(e,t)},parse:function(e){var t=a.integer.numericHelper;return t.isInteger(e)?t.parse(e):null}},a.integer.numericHelper=e,a.number={format:function(e){return null==e?"":""+e},parse:function(e){return null==e?null:(e=Number(e),isNaN(e)?null:e)}}}(),function(){"use strict";valerie.rules={};var e=valerie.utils,t=valerie.formatting,n=valerie.rules,i=valerie.ValidationResult.passedInstance;n.ArrayLength=function(t,i,a){if(2>arguments.length)throw"At least 2 arguments are expected.";return a=e.mergeOptions(n.ArrayLength.defaultOptions,a),new n.Length(t,i,a)},n.ArrayLength.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.format},n.During=function(t,i,a){if(2>arguments.length)throw"At least 2 arguments are expected.";return a=e.mergeOptions(n.During.defaultOptions,a),new n.Range(t,i,a)},n.During.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.format},n.Expression=function(t,i){this.expression=e.isString(t)?RegExp(t):t,this.settings=e.mergeOptions(n.Expression.defaultOptions,i)},n.Expression.defaultOptions={failureMessageFormat:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.format},n.Expression.prototype={test:function(e){var n;return null!=e&&this.expression.test(e)?i:(n=t.replacePlaceholders(this.settings.failureMessageFormat,{value:this.settings.valueFormatter(e,this.settings.valueFormat)}),valerie.ValidationResult.createFailedResult(n))}},n.Length=function(t,i,a){if(2>arguments.length)throw"At least 2 arguments are expected.";a=e.mergeOptions(n.Length.defaultOptions,a);var r=new n.Range(t,i,a);this.test=function(e){var t;return null!=e&&e.hasOwnProperty("length")&&(t=e.length),r.test(t)},this.settings=a},n.Length.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.format},n.Matches=function(t,i){return i=e.mergeOptions(n.Matches.defaultOptions,i),new n.OneOf([t],i)},n.Matches.defaultOptions={failureMessageFormat:"",formatter:valerie.converters.passThrough.format,valueFormat:null},n.NoneOf=function(t,i){this.forbiddenValues=e.asFunction(t),this.settings=e.mergeOptions(n.NoneOf.defaultOptions,i)},n.NoneOf.defaultOptions={failureMessageFormat:"",formatter:valerie.converters.passThrough.format,valueFormat:null},n.NoneOf.prototype={test:function(e){var n,a,r=this.forbiddenValues();for(a=0;r.length>a;a++)if(e===r[a])return n=t.replacePlaceholders(this.settings.failureMessageFormat,{value:this.settings.valueFormatter(e,this.settings.valueFormat)}),valerie.ValidationResult.createFailedResult(n);return i}},n.Not=function(t,i){return i=e.mergeOptions(n.Not.defaultOptions,i),new n.NoneOf([t],i)},n.Not.defaultOptions={failureMessageFormat:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.format},n.OneOf=function(t,i){this.permittedValues=e.asFunction(t),this.settings=e.mergeOptions(n.OneOf.defaultOptions,i)},n.OneOf.defaultOptions={failureMessageFormat:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.format},n.OneOf.prototype={test:function(e){var n,a,r=this.permittedValues();for(a=0;r.length>a;a++)if(e===r[a])return i;return n=t.replacePlaceholders(this.settings.failureMessageFormat,{value:this.settings.valueFormatter(e,this.settings.valueFormat)}),valerie.ValidationResult.createFailedResult(n)}},n.Range=function(t,i,a){if(2>arguments.length||arguments.length>3)throw"At least 2 arguments are expected.";this.minimum=e.asFunction(t),this.maximum=e.asFunction(i),this.settings=e.mergeOptions(n.Range.defaultOptions,a)},n.Range.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.format},n.Range.prototype={test:function(e){var n,a=this.settings.failureMessageFormat,r=this.maximum(),s=this.minimum(),u=null!=r,l=null!=s,o=null!=e,d=!0;return u||l?(o?(u?d=r>=e:a=this.settings.failureMessageFormatForMinimumOnly,l?d=d&&e>=s:a=this.settings.failureMessageFormatForMaximumOnly):d=!1,d?i:(n=t.replacePlaceholders(a,{maximum:this.settings.valueFormatter(r,this.settings.valueFormat),minimum:this.settings.valueFormatter(s,this.settings.valueFormat),value:this.settings.valueFormatter(e,this.settings.valueFormat)}),valerie.ValidationResult.createFailedResult(n))):i}},n.StringLength=function(t,i,a){if(2>arguments.length)throw"At least 2 arguments are expected.";return a=e.mergeOptions(n.StringLength.defaultOptions,a),new n.Length(t,i,a)},n.StringLength.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.format}}(),function(){"use strict";var e=valerie.utils,t=valerie.converters,n=valerie.PropertyValidationState.prototype;n.currencyMajor=function(n){return n=e.mergeOptions(this.currencyMajor.defaultOptions,n),this.settings=e.mergeOptions(this.settings,n),this.settings.converter=t.currencyMajor,this},n.currencyMajor.defaultOptions={entryFormat:null,valueFormat:"C,"},n.currencyMajorMinor=function(n){return n=e.mergeOptions(this.currencyMajorMinor.defaultOptions,n),this.settings=e.mergeOptions(this.settings,n),this.settings.converter=t.currencyMajorMinor,this},n.currencyMajorMinor.defaultOptions={entryFormat:".c",valueFormat:"C,.c"},n.date=function(){return this.settings.converter=t.date,this},n.email=function(){return this.settings.converter=t.email,this},n.float=function(n){return n=e.mergeOptions(this.float.defaultOptions,n),this.settings=e.mergeOptions(this.settings,n),this.settings.converter=t.float,this},n.float.defaultOptions={entryFormat:null,valueFormat:",."},n.integer=function(n){return n=e.mergeOptions(this.integer.defaultOptions,n),this.settings=e.mergeOptions(this.settings,n),this.settings.converter=t.integer,this},n.integer.defaultOptions={entryFormat:null,valueFormat:","},n.number=function(){return this.settings.converter=t.number,this},n.string=function(){return this.settings.converter=t.passThrough,this}}(),function(){"use strict";var e=valerie.PropertyValidationState.prototype,t=valerie.rules;e.during=function(e,n,i){return this.addRule(new t.During(e,n,i))},e.earliest=function(e,n){return this.addRule(new t.During(e,null,n))},e.expression=function(e,n){return this.addRule(new t.Expression(e,n))},e.latest=function(e,n){return this.addRule(new t.During(null,e,n))},e.lengthBetween=function(e,n,i){return this.addRule(new t.StringLength(e,n,i))},e.matches=function(e,n){return this.addRule(new t.Matches(e,n))},e.maximum=function(e,n){return this.addRule(new t.Range(null,e,n))},e.maximumNumberOfItems=function(e,n){return this.addRule(new t.ArrayLength(null,e,n))},e.maximumLength=function(e,n){return this.addRule(new t.StringLength(null,e,n))},e.minimum=function(e,n){return this.addRule(new t.Range(e,null,n))},e.minimumNumberOfItems=function(e,n){return this.addRule(new t.ArrayLength(e,null,n))},e.minimumLength=function(e,n){return this.addRule(new t.StringLength(e,null,n))},e.noneOf=function(e,n){return this.addRule(new t.NoneOf(e,n))},e.not=function(e,n){return this.addRule(new t.Not(e,n))},e.numberOfItems=function(e,n,i){return this.addRule(new t.ArrayLength(e,n,i))},e.oneOf=function(e,n){return this.addRule(new t.OneOf(e,n))},e.range=function(e,n,i){return this.addRule(new t.Range(e,n,i))},e.rule=function(e){return this.addRule({settings:{},test:function(t){return e(t)}})},e.ruleMessage=function(e){var t,n=this.settings.rules,i=n.length-1;return i>=0&&(t=n[i],t.settings.failureMessageFormat=e),this}}(),function(){"use strict";var e;valerie.ModelValidationState.defaultOptions.failureMessageFormat="There are validation errors.",e=valerie.PropertyValidationState.defaultOptions,e.invalidEntryFailureMessage="The value entered is invalid.",e.missingFailureMessage="A value is required."}(),function(){"use strict";var e,t=valerie.rules;e=t.ArrayLength.defaultOptions,e.failureMessageFormat="There must be between {minimum} and {maximum} items.",e.failureMessageFormatForMinimumOnly="There must be at least {minimum} items.",e.failureMessageFormatForMaximumOnly="There must be at most {maximum} items.",e=t.During.defaultOptions,e.failureMessageFormat="The value must be between {minimum} and {maximum}.",e.failureMessageFormatForMinimumOnly="The value must be {minimum} at the earliest.",e.failureMessageFormatForMaximumOnly="The value must be {maximum} at the latest.",e=t.Expression.defaultOptions,e.failureMessageFormat="The value is invalid.",e=t.Length.defaultOptions,e.failureMessageFormat="The length must be between {minimum} and {maximum}.",e.failureMessageFormatForMinimumOnly="The length must be no less than {minimum}.",e.failureMessageFormatForMaximumOnly="The length must be no greater than {maximum}.",e=t.Matches.defaultOptions,e.failureMessageFormat="The value does not match.",e=t.NoneOf.defaultOptions,e.failureMessageFormat="The value is not allowed.",e=t.Not.defaultOptions,e.failureMessageFormat="The value is not allowed.",e=t.OneOf.defaultOptions,e.failureMessageFormat="The value does not match.",e=t.Range.defaultOptions,e.failureMessageFormat="The value must be between {minimum} and {maximum}.",e.failureMessageFormatForMinimumOnly="The value must be no less than {minimum}.",e.failureMessageFormatForMaximumOnly="The value must be no greater than {maximum}.",e=t.StringLength.defaultOptions,e.failureMessageFormat="The value must have between {minimum} and {maximum} characters.",e.failureMessageFormatForMinimumOnly="The value must have at least {minimum} characters.",e.failureMessageFormatForMaximumOnly="The value have at most {maximum} characters."}();