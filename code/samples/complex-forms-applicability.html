<!DOCTYPE html>
<html>
  <head>
    <title>valerie Samples - Complex Forms / Applicability</title><!--[if lte IE 8]>
    <script type="text/javascript" src="../thirdParty/html5shiv.js"></script><![endif]-->
    <link rel="stylesheet" type="text/css" href="../thirdParty/bootstrap/css/bootstrap.min.css"><!--[if lte IE 6]>
    <link rel="stylesheet" type="text/css" href="../thirdParty/bootstrap/css/bootstrap-ie6.min.css">
    <link rel="stylesheet" type="text/css" href="../thirdParty/bootstrap/css/ie.css"><![endif]-->
    <link rel="stylesheet" type="text/css" href="samples.css">
    <link rel="stylesheet" type="text/css" href="../thirdParty/syntaxHighlighter/styles/shCoreEmacs.css">
  </head>
  <body>
    <header>
      <div class="container">
        <h1>valerie</h1>
        <h3>samples</h3>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div class="span3">
          <ul class="nav nav-list">
            <li class="header  "><a href="index.html"><i class="icon-chevron-right"></i>Home</a>
            </li>
            <li class="header  no-page"><a>Basic Form</a>
            </li>
            <li class=""><a href="basic-form-fluent.html"><i class="icon-chevron-right"></i>Fluent</a></li>
            <li class="header  no-page"><a>Complex Forms</a>
            </li>
            <li class="active"><a href="complex-forms-applicability.html"><i class="icon-chevron-right"></i>Applicability</a></li>
            <li class=""><a href="complex-forms-contacts.html"><i class="icon-chevron-right"></i>Contacts</a></li>
          </ul>
        </div>
        <div class="span9">
          <div class="page-header">
            <h1>Complex Forms / Applicability</h1>
          </div>
          <div class="introduction">
            <p>This sample shows <strong>valerie</strong> being used to validate a form with sections and entries that can become</p>inapplicable.
          </div>
          <div class="tabbable">
            <ul class="nav nav-tabs">
              <li class="active"><a href="#sample-live" data-toggle="tab">Live</a></li>
              <li><a href="#sample-live-model" data-toggle="tab">Live Model</a></li>
              <li><a href="#sample-html" data-toggle="tab">HTML</a></li>
              <li><a href="#sample-script-pane" data-toggle="tab">Javascript</a></li>
            </ul>
            <div class="tab-content">
              <div id="sample-live" class="tab-pane active"><div id="sample" class="form-horizontal">
    <fieldset>
        <legend>Order Details</legend>
        <fieldset>
            <label class="checkbox">
                <input name="shipToBillingAddress" type="checkbox" data-bind="checked: shipToBillingAddress"/>
                Ship to Billing Address
            </label>
        </fieldset>
        <fieldset>
            <legend>Billing Address</legend>
            <!-- ko template: { name: 'address-template', data: billingAddress } --><!-- /ko -->
            <!-- ko template: { name: 'summary-template', data: billingAddress } --><!-- /ko -->
        </fieldset>
        <fieldset data-bind="visibleWhenApplicable: shippingAddress">
            <legend>Shipping Address</legend>
            <!-- ko template: { name: 'address-template', data: shippingAddress } --><!-- /ko -->
            <!-- ko template: { name: 'summary-template', data: shippingAddress } --><!-- /ko -->
        </fieldset>
    </fieldset>

    <div class="form-actions">
        <button data-bind="click: submit" class="btn btn-primary">
            <span data-bind="validationCss: true"></span>
            Submit
        </button>
    </div>
</div>

<script type="text/html" id="address-template">
    <div data-bind="validationCss: street" class="control-group">
        <label for="street" class="control-label">Street</label>

        <div class="controls">
            <input id="street" type="text" data-bind="value: street"/>

            <div data-bind="validationMessageText: street" class="help-block"></div>
        </div>
    </div>
    <div data-bind="validationCss: town" class="control-group">
        <label for="town" class="control-label">Town</label>

        <div class="controls">
            <input id="town" type="text" data-bind="value: town"/>

            <div data-bind="validationMessageText: town" class="help-block"></div>
        </div>
    </div>
    <div data-bind="validationCss: postcode" class="control-group">
        <label for="postcode" class="control-label">Postcode</label>

        <div class="controls">
            <input id="postcode" type="text" data-bind="value: postcode"/>

            <div data-bind="validationMessageText: postcode" class="help-block"></div>
        </div>
    </div>
</script>

<script type="text/html" id="summary-template">
    <ul data-bind="foreach: validation().summary(), visibleWhenSummaryNotEmpty: true" class="alert alert-error">
        <li><span data-bind="text: name"></span>: <span data-bind="text: message"></span></li>
    </ul>
</script>
              </div>
              <div id="sample-live-model" class="tab-pane">
                <pre data-bind="text: JSON.stringify(ko.toJS($data), null, 2)"></pre>
              </div>
              <div id="sample-html" class="tab-pane">
                <pre class=".brush: xml"></pre><script type="text/html"><div id="sample" class="form-horizontal">
    <fieldset>
        <legend>Order Details</legend>
        <fieldset>
            <label class="checkbox">
                <input name="shipToBillingAddress" type="checkbox" data-bind="checked: shipToBillingAddress"/>
                Ship to Billing Address
            </label>
        </fieldset>
        <fieldset>
            <legend>Billing Address</legend>
            <!-- ko template: { name: 'address-template', data: billingAddress } --><!-- /ko -->
            <!-- ko template: { name: 'summary-template', data: billingAddress } --><!-- /ko -->
        </fieldset>
        <fieldset data-bind="visibleWhenApplicable: shippingAddress">
            <legend>Shipping Address</legend>
            <!-- ko template: { name: 'address-template', data: shippingAddress } --><!-- /ko -->
            <!-- ko template: { name: 'summary-template', data: shippingAddress } --><!-- /ko -->
        </fieldset>
    </fieldset>

    <div class="form-actions">
        <button data-bind="click: submit" class="btn btn-primary">
            <span data-bind="validationCss: true"></span>
            Submit
        </button>
    </div>
</div>

<script type="text/html" id="address-template">
    <div data-bind="validationCss: street" class="control-group">
        <label for="street" class="control-label">Street</label>

        <div class="controls">
            <input id="street" type="text" data-bind="value: street"/>

            <div data-bind="validationMessageText: street" class="help-block"></div>
        </div>
    </div>
    <div data-bind="validationCss: town" class="control-group">
        <label for="town" class="control-label">Town</label>

        <div class="controls">
            <input id="town" type="text" data-bind="value: town"/>

            <div data-bind="validationMessageText: town" class="help-block"></div>
        </div>
    </div>
    <div data-bind="validationCss: postcode" class="control-group">
        <label for="postcode" class="control-label">Postcode</label>

        <div class="controls">
            <input id="postcode" type="text" data-bind="value: postcode"/>

            <div data-bind="validationMessageText: postcode" class="help-block"></div>
        </div>
    </div>
</script>

<script type="text/html" id="summary-template">
    <ul data-bind="foreach: validation().summary(), visibleWhenSummaryNotEmpty: true" class="alert alert-error">
        <li><span data-bind="text: name"></span>: <span data-bind="text: message"></span></li>
    </ul>
</script></script>
              </div>
              <div id="sample-script-pane" class="tab-pane">
                <pre class=".brush: js"></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div><!--[if lt IE 8]>
    <script type="text/javascript" src="../thirdParty/json3.min.js"></script><![endif]-->
    <script type="text/javascript" src="../thirdParty/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="../thirdParty/bootstrap/js/bootstrap.min.js"></script><!--[if lte IE 6]>
    <script type="text/javascript" src="../thirdParty/bootstrap/js/ie6.js"></script><![endif]-->
    <script type="text/javascript" src="../thirdParty/knockout-2.2.1.debug.js"></script>
    <!-- valerie - core-->
    <script type="text/javascript" src="../valerie/core/valerie.namespace.js"></script>
    <script type="text/javascript" src="../valerie/core/valerie.utils.js"></script>
    <script type="text/javascript" src="../valerie/core/valerie.formatting.js"></script>
    <script type="text/javascript" src="../valerie/core/valerie.dom.js"></script>
    <script type="text/javascript" src="../valerie/core/valerie.koExtras.js"></script>
    <script type="text/javascript" src="../valerie/core/valerie.converters.js"></script>
    <script type="text/javascript" src="../valerie/core/valerie.validationResult.js"></script>
    <script type="text/javascript" src="../valerie/core/valerie.validationState.js"></script>
    <script type="text/javascript" src="../valerie/core/valerie.modelValidationState.js"></script>
    <script type="text/javascript" src="../valerie/core/valerie.propertyValidationState.js"></script>
    <script type="text/javascript" src="../valerie/core/ko.computed.fn.js"></script>
    <script type="text/javascript" src="../valerie/core/ko.observable.fn.js"></script>
    <script type="text/javascript" src="../valerie/core/ko.bindingHandlers.js"></script>
    <script type="text/javascript" src="../valerie/core/valerie.koBindingsHelper.js"></script>
    <!-- valerie - full-->
    <script type="text/javascript" src="../valerie/full/valerie.numericHelper.js"></script>
    <script type="text/javascript" src="../valerie/full/valerie.converters.full.js"></script>
    <script type="text/javascript" src="../valerie/full/valerie.rules.js"></script>
    <script type="text/javascript" src="../valerie/full/valerie.propertyValidationState-fluentConverters.js"></script>
    <script type="text/javascript" src="../valerie/full/valerie.propertyValidationState-fluentRules.js"></script>
    <!-- valerie - en-->
    <script type="text/javascript" src="../valerie/localisation/en/core-en.js"></script>
    <script type="text/javascript" src="../valerie/localisation/en/full-en.js"></script>
    <!-- valerie - en-gb-->
    <script type="text/javascript" src="../valerie/localisation/en-gb/full-en-gb.js"></script>
    <script type="text/javascript" src="../valerie/localisation/en-gb/valerie.converters-en-gb.js"></script>
    <script type="text/javascript" src="../valerie/localisation/en-gb/valerie.propertyValidationState-fluentConverters-en-gb.js"></script>
    <!-- syntax highlighter-->
    <script type="text/javascript" src="../thirdParty/syntaxHighlighter/scripts/shCore.js"></script>
    <script type="text/javascript" src="../thirdParty/syntaxHighlighter/scripts/shBrushJScript.js"></script>
    <script type="text/javascript" src="../thirdParty/syntaxHighlighter/scripts/shBrushXml.js"></script>
    <!-- samples-->
    <script type="text/javascript" src="samples.js"></script>
    <!-- sample script-->
    <div id="sample-script"><script type="text/javascript">
function RunSample() {
    function Address() {
        var self = valerie.validatableModel({
            "street": ko.observable()
                .validate()
                .string()
                .name("Street")
                .required()
                .minimumLength(5)
                .end(),
            "town": ko.observable()
                .validate()
                .string()
                .name("Town")
                .required()
                .minimumLength(2)
                .end(),
            "postcode": ko.observable()
                .validate()
                .name("Postcode")
                .required()
                .postcode()
                .end()
        })
            .name("Contact")
            .validateChildProperties()
            .end();

        return self;
    }

    function ViewModel() {
        var shipToBillingAddress = ko.observable(false)
                .validate()
                .name("Ship to Billing Address")
                .end(),
            self = valerie.validatableModel({
                "shipToBillingAddress": shipToBillingAddress,
                "billingAddress": new Address(),
                "shippingAddress": new Address()
                    .validation()
                    .applicable(ko.computed(function () { return !shipToBillingAddress(); }))
                    .end(),
                "submit": function () {
                    self.validation().touched(true);
                    self.validation().updateSummary(true);
                }
            })
                .validateChildPropertiesAndSubModels()
                .end();

        return self;
    }

    var viewModel = new ViewModel();

    ko.bindingHandlers.validationCss.classNames.failed = "error";
    ko.bindingHandlers.validationCss.classNames.passed = "success";

    valerie.koBindingsHelper.useValidatingBindingHandlers();
    ko.applyBindings(viewModel, document.getElementById("sample"));

    return viewModel;
};</script>
    </div>
  </body>
</html>