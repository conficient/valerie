/* valeriejs - MIT license - (c) egrove Ltd (egrove.co.uk) */
var valerie=valerie||{};(function(){"use strict";var e,t={failed:{},passed:{},pending:{}};e=valerie.ValidationResult=function(e,n){this.state=e,this.failed=e===t.failed,this.passed=e===t.passed,this.pending=e===t.pending,this.message=n},valerie.ValidationResult.states=t,valerie.FailedValidationResult=function(n){return new e(t.failed,n)},valerie.PassedValidationResult=function(n){return new e(t.passed,n)},valerie.PendingValidationResult=function(n){return new e(t.pending,n)},valerie.ValidationResult.passed=new e(t.passed,""),valerie.ValidationResult.pending=new e(t.pending,"")})();var valerie=valerie||{};(function(){"use strict";var e=valerie.utils=valerie.utils||{};e.asFunction=function(t){return e.isFunction(t)?t:function(){return t}},e.isArray=function(e){return"[object Array]"==={}.toString.call(e)},e.isArrayOrObject=function(e){return null===e?!1:"object"==typeof e},e.isFunction=function(e){return null==e?!1:"function"==typeof e},e.isMissing=function(e){return null==e?!0:0===e.length?!0:!1},e.isObject=function(t){return null===t?!1:e.isArray(t)?!1:"object"==typeof t},e.isString=function(e){return"[object String]"==={}.toString.call(e)},e.mergeOptions=function(t,n){var i,r,a={};null==t&&(t={}),null==n&&(n={});for(i in t)t.hasOwnProperty(i)&&(r=t[i],e.isArray(r)&&(r=r.slice(0)),a[i]=r);for(i in n)n.hasOwnProperty(i)&&(a[i]=n[i]);return a}})();var valerie=valerie||{};(function(){"use strict";var e=valerie.formatting=valerie.formatting||{};e.addThousandsSeparator=function(e,t,n){var i=(""+e).split(n),r=i[0];return r=r.replace(/\B(?=(\d{3})+(?!\d))/g,t),i[0]=r,i.join(n)},e.replacePlaceholders=function(e,t){return null==t&&(t={}),e.replace(/\{(\w+)\}/g,function(e,n){var i=t[n];return null==i?e:""+i})},e.pad=function(e,t,n){return e=""+e,e.length>=n?e:Array(n+1-e.length).join(t)+e}})();var valerie=valerie||{};(function(){"use strict";var e=valerie.converters=valerie.converters||{};e.passThrough={formatter:function(e){return null==e?"":""+e},parser:function(e){return e}}})();var valerie=valerie||{};(function(){"use strict";var e=valerie.knockout=valerie.knockout||{},t=e.extras=e.extras||{};t.isolatedBindingHandler=function(e,t){var n=1===arguments.length?function(){}:e;return t=2===arguments.length?t:e,{init:function(e,i,r,a,s){n(e,i,r,a,s),ko.computed({read:function(){t(e,i,r,a,s)},disposeWhenNodeIsRemoved:e})}}},t.pausableComputed=function(e,t,n,i){var r,a,s;return a=null==i?ko.observable(!1):ko.utils.isSubscribable(i)?i:ko.observable(i),s=ko.computed(function(){return a()?r:e.call(t)},t,n),s.paused=ko.computed({read:function(){return a()},write:function(e){e&&(e=!0),e!==a()&&(e&&(r=s()),a(e))}}),s.refresh=function(){a()&&(a(!1),r=s(),a(!0))},s}})();var valerie=valerie||{};(function(){"use strict";var e=valerie.dom=valerie.dom||{},t=/\s+/g,n=/^\s+|\s+$/g;e.classNamesStringToDictionary=function(e){var i,r,a={};if(null==e)return a;for(e=e.replace(n,""),i=e.split(t),r=0;i.length>r;r++)a[i[r]]=!0;return a},e.classNamesDictionaryToString=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&e[t]&&n.push(t);return n.sort(),n.join(" ")},e.setElementVisibility=function(e,t){var n="none"!==e.style.display;n!==t&&(e.style.display=t?"":"none")}})(),function(){"use strict";var e,t=valerie.FailedValidationResult,n=valerie.ValidationResult.passed,i=valerie.ValidationResult.pending,r=ko.observable,a=ko.computed,s=valerie.utils,u=valerie.formatting,o=valerie.knockout,l=o.extras,d={deferEvaluation:!0},c="validation";o.findValidationStates=function(e,t,n,i){1 in arguments||(t=!0),2 in arguments||(n=!1),3 in arguments||(i=[]);var r,a,u;for(r in e)if(e.hasOwnProperty(r)){if(u=e[r],null==u)continue;if(a=o.getValidationState(u),ko.isObservable(u)&&(u=u.peek()),s.isFunction(u))continue;s.isArrayOrObject(u)?(t&&a&&i.push(a),n&&o.findValidationStates(u,t,!0,i)):a&&i.push(a)}return i},o.getValidationState=function(e){return null==e?null:e.hasOwnProperty(c)?e[c]():null},o.hasValidationState=function(e){return null==e?!1:e.hasOwnProperty(c)},o.setValidationState=function(e,t){e[c]=function(){return t}},o.validatableModel=function(e,t){var n=new o.ModelValidationState(e,t);return o.setValidationState(e,n),n},o.validatableProperty=function(e,t){if(!ko.isSubscribable(e))throw"Only observables or computeds can be made validatable properties.";var n=new o.PropertyValidationState(e,t);return o.setValidationState(e,n),n},r.fn.validate=a.fn.validate=function(e){return o.validatableProperty(this,e)},function(){var u=function(){return this.result().failed},c=function(){var e,t,n,i=[],r=this.validationStates();for(n=0;r.length>n;n++)e=r[n],e.settings.applicable()&&(t=e.result(),t.failed&&i.push(e));return i},f=function(){return this.result().message},h=function(){return this.result().passed},v=function(){return this.result().pending},p=function(){var e,t,n=[],i=this.validationStates();for(t=0;i.length>t;t++)e=i[t],e.result().pending&&n.push(e);return n},g=function(){return this.failedStates().length>0?new t(this.settings.failureMessageFormat):this.pendingStates().length>0?i:n},m=function(){var e,t=this.validationStates();for(e=0;t.length>e;e++)if(t[e].touched())return!0;return!1},y=function(e){var t,n=this.validationStates();for(t=0;n.length>t;t++)n[t].touched(e)};e=o.ModelValidationState=function(e,t){t=s.mergeOptions(o.ModelValidationState.defaultOptions,t),t.applicable=s.asFunction(t.applicable),t.name=s.asFunction(t.name),this.model=e,this.settings=t,this.summary=r([]),this.validationStates=ko.observableArray(),this.failed=a(u,this,d),this.failedStates=a(c,this,d),this.message=a(f,this,d),this.passed=a(h,this,d),this.pending=a(v,this,d),this.pendingStates=a(p,this,d),this.result=l.pausableComputed(g,this,d,t.paused),this.touched=a({read:m,write:y,deferEvaluation:!0,owner:this}),this.paused=this.result.paused,this.refresh=this.result.refresh},e.prototype={addValidationStates:function(e){return this.validationStates.push.apply(this.validationStates,e),this},applicable:function(e){return null==e&&(e=!0),this.settings.applicable=s.asFunction(e),this},clearSummary:function(e){var t,n,i;if(this.summary([]),e)for(t=this.validationStates(),i=0;t.length>i;i++)n=t[i],n.clearSummary&&n.clearSummary();return this},name:function(e){return this.settings.name=s.asFunction(e),this},end:function(){return this.model},removeValidationStates:function(e){return this.validationStates.removeAll(e),this},stopValidatingSubModel:function(e){return this.validationStates.removeAll(e.validation().validationStates.peek()),this},updateSummary:function(e){var t,n,i=this.failedStates(),r=[];for(n=0;i.length>n;n++)t=i[n],r.push({name:t.settings.name(),message:t.message()});if(this.summary(r),e)for(i=this.validationStates(),n=0;i.length>n;n++)t=i[n],t.updateSummary&&t.updateSummary();return this},validateAll:function(){var e=o.findValidationStates(this.model,!0,!0);return this.addValidationStates(e),this},validateAllProperties:function(){var e=o.findValidationStates(this.model,!1,!0);return this.addValidationStates(e),this},validateMyProperties:function(){var e=o.findValidationStates(this.model,!1,!1);return this.addValidationStates(e),this},validateMyPropertiesAndSubModels:function(){var e=o.findValidationStates(this.model,!0,!1);return this.addValidationStates(e),this}},e.defaultOptions={applicable:s.asFunction(!0),failureMessageFormat:"",name:s.asFunction("(?)"),paused:null}}(),function(){var i=function(){var e=this.observableOrComputed(),t=this.settings.missingTest(e),n=this.settings.required();return t&&n?-1:t&&!n?0:1},c=function(){var e,t,i,r=this.observableOrComputed(),a=this.settings.rules;for(i=0;a.length>i;i++)if(e=a[i],t=e.test(r),t.failed||t.pending)return t;return n},f=function(){return this.result().failed},h=function(){var e=this.result().message;return e=u.replacePlaceholders(e,{name:this.settings.name()})},v=function(){return this.result().passed},p=function(){return this.result().pending},g=function(){var e,n;return n=this.boundEntry.result(),n.failed?n:(e=i.apply(this),-1===e?new t(this.settings.missingFailureMessage):0===e?n:c.apply(this))},m=function(){return this.settings.applicable()?this.touched()&&this.result().failed:!1};e=o.PropertyValidationState=function(e,t){t=s.mergeOptions(o.PropertyValidationState.defaultOptions,t),t.applicable=s.asFunction(t.applicable),t.name=s.asFunction(t.name),t.required=s.asFunction(t.required),this.boundEntry={focused:r(!1),result:r(n),textualInput:!1},this.observableOrComputed=e,this.settings=t,this.touched=r(!1),this.failed=a(f,this,d),this.message=l.pausableComputed(h,this,d),this.passed=a(v,this,d),this.pending=a(p,this,d),this.result=a(g,this,d),this.showMessage=l.pausableComputed(m,this,d)},e.prototype={addRule:function(e){return this.settings.rules.push(e),this},applicable:function(e){return null==e&&(e=!0),this.settings.applicable=s.asFunction(e),this},end:function(){var e,t,n=this.settings,i=n.valueFormat,r=n.converter.formatter,a=n.rules;for(e=0;a.length>e;e++)t=a[e].settings,t.valueFormat=i,t.valueFormatter=r;return this.observableOrComputed},name:function(e){return this.settings.name=s.asFunction(e),this},required:function(e){return null==e&&(e=!0),this.settings.required=s.asFunction(e),this},valueFormat:function(e){return this.settings.valueFormat=e,this}},e.defaultOptions={applicable:s.asFunction(!0),converter:valerie.converters.passThrough,entryFormat:null,invalidEntryFailureMessage:"",missingFailureMessage:"",missingTest:s.isMissing,name:s.asFunction(),required:s.asFunction(!1),rules:[],valueFormat:null}}()}(),function(){"use strict";var e=valerie.FailedValidationResult,t=valerie.ValidationResult.passed,n=valerie.utils,i=valerie.dom,r=valerie.knockout,a=valerie.converters,s=ko.bindingHandlers,u=ko.utils.registerEventHandler,o=i.setElementVisibility,l=r.getValidationState,d=valerie.knockout.extras.isolatedBindingHandler;(function(){var i,a,o=s.checked,d=s.value,c=function(e,t){var n=l(t);n.touched(!0),n.boundEntry.focused(!1),n.message.paused(!1),n.showMessage.paused(!1)},f=function(e,t){var n,i=l(t);i.boundEntry.result.peek().failed||(n=t.peek(),e.value=i.settings.converter.formatter(n,i.settings.entryFormat))},h=function(e,t){var n=l(t);n.boundEntry.focused(!0),n.message.paused(!0),n.showMessage.paused(!0)},v=function(n,i){var r,a=ko.utils.stringTrim(n.value),s=l(i),u=s.settings,o=t;0===a.length?(i(null),u.required()&&(o=new e(u.missingFailureMessage))):(r=u.converter.parser(a),i(r),null==r&&(o=new e(u.invalidEntryFailureMessage))),s.boundEntry.result(o)},p=function(e,n,i){var r=e();n.boundEntry.focused.peek()||(n.boundEntry.result(t),i.value=n.settings.converter.formatter(r,n.settings.entryFormat))};i=s.validatedChecked={init:function(e,t,i,r,a){var s=t(),d=l(s);o.init(e,t,i,r,a),d&&(u(e,"blur",function(){c(e,s)}),null==d.settings.name()&&(d.settings.name=n.asFunction(e.name)))},update:o.update},a=s.validatedValue={init:function(e,t,i,r,a){var s,o,g=t(),m=l(g);return m?(null==m.settings.name()&&(m.settings.name=n.asFunction(e.name)),u(e,"blur",function(){c(e,g)}),s=ko.utils.tagNameLower(e),(o="input"===s&&"text"===e.type.toLowerCase()||"textarea"===s)?(m.boundEntry.textualInput=!0,u(e,"blur",function(){f(e,g)}),u(e,"focus",function(){h(e,g)}),u(e,"keyup",function(){v(e,g)}),ko.computed({read:function(){p(g,m,e)},disposeWhenNodeIsRemoved:e}),void 0):(d.init(e,t,i,r,a),void 0)):(d.init(e,t,i,r,a),void 0)},update:function(e,t,n,i,r){var a=t(),s=l(a);s&&s.boundEntry.textualInput||d.update(e,t,n,i,r)}},r.originalBindingHandlers={checked:o,value:d},r.validatingBindingHandlers={checked:i,value:a},r.useValidatingBindingHandlers=function(){return s.checked=i,s.value=a,s.koChecked=o,s.koValue=d,r},r.useOriginalBindingHandlers=function(){return s.checked=o,s.value=d,r}})(),function(){var e=function(e,t,n,i,r){var a,s=i(),u=n();u===!0&&(u=s.value||s.checked||s.validatedValue||s.validatedChecked||r),a=l(u),a&&e(a,u,s)};s.disabledWhenNotValid=d(function(t,n,i,r){var a=function(e){t.disabled=!e.passed()};e(a,t,n,i,r)}),s.disabledWhenTouchedAndNotValid=d(function(t,n,i,r){var a=function(e){t.disabled=e.touched()&&!e.passed()};e(a,t,n,i,r)}),s.enabledWhenApplicable=d(function(t,n,i,r){var a=function(e){t.disabled=!e.settings.applicable()};e(a,t,n,i,r)}),s.formattedValue=d(function(e,t,n){var i,r=n(),s=t(),u=ko.utils.unwrapObservable(s),o=l(s),d=a.passThrough.formatter;o&&(d=o.settings.converter.formatter,i=o.settings.valueFormat),d=r.formatter||d,null==i&&(i=r.valueFormat),ko.utils.setTextContent(e,d(u,i))}),s.validationCss=d(function(t,n,r,a){var u=function(e){var n=s.validationCss.classNames,r=t.className,a=i.classNamesStringToDictionary(r),u=e.failed(),o=!1,l=e.passed(),d=e.pending(),c=e.touched(),f=!c;e.boundEntry&&e.boundEntry.focused()&&(o=!0),a[n.failed]=u,a[n.focused]=o,a[n.passed]=l,a[n.pending]=d,a[n.touched]=c,a[n.untouched]=f,t.className=i.classNamesDictionaryToString(a)};e(u,t,n,r,a)}),s.validationCss.classNames={failed:"error",focused:"focused",passed:"success",pending:"waiting",touched:"touched",untouched:"untouched"},s.validationMessageFor=d(function(t,n,i,r){var a=function(e){o(t,e.showMessage()),ko.utils.setTextContent(t,e.message())};e(a,t,n,i,r)}),s.visibleWhenFocused=d(function(t,n,i,r){var a=function(e){o(t,e.focused())};e(a,t,n,i,r)}),s.visibleWhenInvalid=d(function(t,n,i,r){var a=function(e){o(t,e.failed())};e(a,t,n,i,r)}),s.visibleWhenSummaryNotEmpty=d(function(t,n,i,r){var a=function(e){o(t,e.summary().length>0)};e(a,t,n,i,r)}),s.visibleWhenTouched=d(function(t,n,i,r){var a=function(e){o(t,e.touched())};e(a,t,n,i,r)}),s.visibleWhenUntouched=d(function(t,n,i,r){var a=function(e){o(t,!e.touched())};e(a,t,n,i,r)}),s.visibleWhenValid=d(function(t,n,i,r){var a=function(e){o(t,e.passed())};e(a,t,n,i,r)})}()}();var valerie=valerie||{};(function(){"use strict";var e=valerie.formatting,t=function(e,t){var n=t.indexOf("C")>-1,i=t.indexOf(",")>-1,r=t.indexOf("."),a=0;return r===t.length-1?a=null:r>-1&&(a="c"===t.charAt(r+1)?e.settings.currencyMinorUnitPlaces:Number(t.substr(r+1))),{includeCurrencySign:n,includeThousandsSeparator:i,numberOfDecimalPlaces:a}};valerie.NumericHelper=function(){},valerie.NumericHelper.prototype={init:function(e,t,n,i){var r="\\d+(\\"+t+"\\d{3})*",a="(\\"+n+")?"+r,s=a+"(\\"+e+"\\d{"+i+"})?",u=r+"(\\"+e+"\\d+)?";return this.settings={decimalSeparator:e,thousandsSeparator:t,currencySign:n,currencyMinorUnitPlaces:i},this.expressions={currencyMajor:RegExp("^"+a+"$"),currencyMajorMinor:RegExp("^"+s+"$"),"float":RegExp("^"+u+"$"),integer:RegExp("^"+r+"$")},this},addThousandsSeparator:function(t){var n=this.settings;return e.addThousandsSeparator(t,n.thousandsSeparator,n.decimalSeparator)},format:function(e,n){if(null==e)return"";null==n&&(n="");var i=this.settings,r=t(this,n),a=r.numberOfDecimalPlaces,s=0>e;return s&&(e=-e),e=null!=a?e.toFixed(a):""+e,e=e.replace(".",i.decimalSeparator),r.includeThousandsSeparator&&(e=this.addThousandsSeparator(e)),(s?"-":"")+(r.includeCurrencySign?i.currencySign:"")+e},isCurrencyMajor:function(e){return this.expressions.currencyMajor.test(e)},isCurrencyMajorMinor:function(e){return this.expressions.currencyMajorMinor.test(e)},isFloat:function(e){return this.expressions.float.test(e)},isInteger:function(e){return this.expressions.integer.test(e)},parse:function(e){return e=this.unformat(e),Number(e)},unformat:function(e){var t=this.settings;return e=e.replace(t.currencySign,""),e=e.replace(t.thousandsSeparator,""),e=e.replace(t.decimalSeparator,".")}}})();var valerie=valerie||{};(function(){"use strict";var e=valerie.formatting.pad,t=valerie.converters=valerie.converters||{},n=new valerie.NumericHelper,i=/^(\d\d?)(?:\-|\/)(\d\d?)(?:\-|\/)(\d\d\d\d)$/,r=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;t.date={formatter:function(n){if(null==n)return"";var i,r;return t.date.monthBeforeDate?(i=n.getMonth()+1,r=n.getDate()):(i=n.getDate(),r=n.getMonth()+1),e(i,"0",2)+"/"+e(r,"0",2)+"/"+n.getFullYear()},parser:function(e){if(null==e)return null;var n=e.match(i);if(null==n)return null;var r,a,s=parseInt(n[1],10),u=parseInt(n[2],10),o=parseInt(n[3],10);return t.date.monthBeforeDate?(r=u,a=s):(r=s,a=u),a--,e=new Date(o,a,r),e.getFullYear()!==o||e.getMonth()!==a||e.getDate()!==r?null:e}},t.date.monthBeforeDate=!1,t.defaultNumericHelper=n,t.currencyMajor={formatter:function(e,n){return t.currency.numericHelper.format(e,n)},parser:function(e){var n=t.currency.numericHelper;return n.isCurrencyMajor(e)?n.parse(e):null}},t.currencyMajorMinor={formatter:function(e,n){return t.currency.numericHelper.format(e,n)},parser:function(e){var n=t.currency.numericHelper;return n.isCurrencyMajorMinor(e)?n.parse(e):null}},t.currency={numericHelper:n},t.email={formatter:function(e){return null==e?"":e},parser:function(e){return null==e?null:r.test(e)?e.toLowerCase():null}},t.float={formatter:function(e,n){return t.float.numericHelper.format(e,n)},parser:function(e){var n=t.float.numericHelper;return n.isFloat(e)?n.parse(e):null}},t.float.numericHelper=n,t.integer={formatter:function(e,n){return t.integer.numericHelper.format(e,n)},parser:function(e){var n=t.integer.numericHelper;return n.isInteger(e)?n.parse(e):null}},t.integer.numericHelper=n,t.number={formatter:function(e){return null==e?"":""+e},parser:function(e){return null==e?null:(e=Number(e),isNaN(e)?null:e)}}})(),function(){"use strict";var e=valerie.FailedValidationResult,t=valerie.ValidationResult.passed,n=valerie.rules=valerie.rules||{},i=valerie.utils,r=valerie.formatting;n.ArrayLength=function(e,t,r){if(2>arguments.length)throw"At least 2 arguments are expected.";return r=i.mergeOptions(n.ArrayLength.defaultOptions,r),new n.Length(e,t,r)},n.ArrayLength.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.During=function(e,t,r){if(2>arguments.length)throw"At least 2 arguments are expected.";return r=i.mergeOptions(n.During.defaultOptions,r),new n.Range(e,t,r)},n.During.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.Expression=function(e,t){this.expression=i.isString(e)?RegExp(e):e,this.settings=i.mergeOptions(n.Expression.defaultOptions,t)},n.Expression.defaultOptions={failureMessageFormat:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.Expression.prototype={test:function(n){var i;return null!=n&&this.expression.test(n)?t:(i=r.replacePlaceholders(this.settings.failureMessageFormat,{value:this.settings.valueFormatter(n,this.settings.valueFormat)}),new e(i))}},n.Length=function(e,t,r){if(2>arguments.length)throw"At least 2 arguments are expected.";r=i.mergeOptions(n.Length.defaultOptions,r);var a=new n.Range(e,t,r);this.test=function(e){var t;return null!=e&&e.hasOwnProperty("length")&&(t=e.length),a.test(t)}},n.Length.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.Matches=function(e,t){return t=i.mergeOptions(n.Matches.defaultOptions,t),new n.OneOf([e],t)},n.Matches.defaultOptions={failureMessageFormat:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.NoneOf=function(e,t){this.forbiddenValues=i.asFunction(e),this.settings=i.mergeOptions(n.NoneOf.defaultOptions,t)},n.NoneOf.defaultOptions={failureMessageFormat:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.NoneOf.prototype={test:function(n){var i,a,s=this.forbiddenValues();for(a=0;s.length>a;a++)if(n===s[a])return i=r.replacePlaceholders(this.settings.failureMessageFormat,{value:this.settings.valueFormatter(n,this.settings.valueFormat)}),new e(i);return t}},n.Not=function(e,t){return t=i.mergeOptions(n.Not.defaultOptions,t),new n.NoneOf([e],t)},n.Not.defaultOptions={failureMessageFormat:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.OneOf=function(e,t){this.permittedValues=i.asFunction(e),this.settings=i.mergeOptions(n.OneOf.defaultOptions,t)},n.OneOf.defaultOptions={failureMessageFormat:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.OneOf.prototype={test:function(n){var i,a,s=this.permittedValues();for(a=0;s.length>a;a++)if(n===s[a])return t;return i=r.replacePlaceholders(this.settings.failureMessageFormat,{value:this.settings.valueFormatter(n,this.settings.valueFormat)}),new e(i)}},n.Range=function(e,t,r){if(2>arguments.length||arguments.length>3)throw"At least 2 arguments are expected.";this.minimum=i.asFunction(e),this.maximum=i.asFunction(t),this.settings=i.mergeOptions(n.Range.defaultOptions,r)},n.Range.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.Range.prototype={test:function(n){var i,a=this.settings.failureMessageFormat,s=this.maximum(),u=this.minimum(),o=null!=s,l=null!=u,d=null!=n,c=!0;return o||l?(d?(o?c=s>=n:a=this.settings.failureMessageFormatForMinimumOnly,l?c=c&&n>=u:a=this.settings.failureMessageFormatForMaximumOnly):c=!1,c?t:(i=r.replacePlaceholders(a,{maximum:this.settings.valueFormatter(s,this.settings.valueFormat),minimum:this.settings.valueFormatter(u,this.settings.valueFormat),value:this.settings.valueFormatter(n,this.settings.valueFormat)}),new e(i))):t}},n.StringLength=function(e,t,r){if(2>arguments.length)throw"At least 2 arguments are expected.";return r=i.mergeOptions(n.StringLength.defaultOptions,r),new n.Length(e,t,r)},n.StringLength.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter}}(),function(){"use strict";var e=valerie.utils,t=valerie.converters,n=valerie.knockout.PropertyValidationState.prototype;n.currencyMajor=function(n){return n=e.mergeOptions(this.currencyMajor.defaultOptions,n),this.settings=e.mergeOptions(this.settings,n),this.settings.converter=t.currencyMajor,this},n.currencyMajor.defaultOptions={entryFormat:null,valueFormat:"C,"},n.currencyMajorMinor=function(n){return n=e.mergeOptions(this.currencyMajorMinor.defaultOptions,n),this.settings=e.mergeOptions(this.settings,n),this.settings.converter=t.currencyMajorMinor,this},n.currencyMajorMinor.defaultOptions={entryFormat:".c",valueFormat:"C,.c"},n.date=function(){return this.settings.converter=t.date,this},n.email=function(){return this.settings.converter=t.email,this},n.float=function(n){return n=e.mergeOptions(this.float.defaultOptions,n),this.settings=e.mergeOptions(this.settings,n),this.settings.converter=t.float,this},n.float.defaultOptions={entryFormat:null,valueFormat:",."},n.integer=function(n){return n=e.mergeOptions(this.integer.defaultOptions,n),this.settings=e.mergeOptions(this.settings,n),this.settings.converter=t.integer,this},n.integer.defaultOptions={entryFormat:null,valueFormat:","},n.number=function(){return this.settings.converter=t.number,this},n.string=function(){return this.settings.converter=t.passThrough,this}}(),function(){"use strict";var e=valerie.knockout.PropertyValidationState.prototype,t=valerie.rules;e.during=function(e,n,i){return this.addRule(new t.During(e,n,i))},e.earliest=function(e,n){return this.addRule(new t.During(e,null,n))},e.expression=function(e,n){return this.addRule(new t.Expression(e,n))},e.latest=function(e,n){return this.addRule(new t.During(null,e,n))},e.length=function(e,n,i){return this.addRule(new t.StringLength(e,n,i))},e.matches=function(e,n){return this.addRule(new t.Matches(e,n))},e.maximum=function(e,n){return this.addRule(new t.Range(null,e,n))},e.maximumNumberOfItems=function(e,n){return this.addRule(new t.ArrayLength(null,e,n))},e.maximumLength=function(e,n){return this.addRule(new t.StringLength(null,e,n))},e.ruleMessage=function(e){var t,n=this.settings.rules,i=n.length-1;return i>=0&&(t=n[i],t.settings.failureMessageFormat=e),this},e.minimum=function(e,n){return this.addRule(new t.Range(e,null,n))},e.minimumNumerOfItems=function(e,n){return this.addRule(new t.ArrayLength(e,null,n))},e.minimumLength=function(e,n){return this.addRule(new t.StringLength(e,null,n))},e.noneOf=function(e,n){return this.addRule(new t.NoneOf(e,n))},e.not=function(e,n){return this.addRule(new t.Not(e,n))},e.numberOfItems=function(e,n,i){return this.addRule(new t.ArrayLength(e,n,i))},e.oneOf=function(e,n){return this.addRule(new t.OneOf(e,n))},e.range=function(e,n,i){return this.addRule(new t.Range(e,n,i))},e.rule=function(e){return this.addRule({settings:{},test:function(t){return e(t)}})}}();