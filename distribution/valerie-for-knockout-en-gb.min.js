/* valeriejs - MIT license - (c) egrove Ltd (egrove.co.uk) */
var valerie={};(function(){"use strict";var e,t={failed:{},passed:{},pending:{}};e=valerie.ValidationResult=function(e,n){this.state=e,this.failed=e===t.failed,this.passed=e===t.passed,this.pending=e===t.pending,this.message=n},valerie.ValidationResult.states=t,valerie.FailedValidationResult=function(n){return new e(t.failed,n)},valerie.PassedValidationResult=function(n){return new e(t.passed,n)},valerie.PendingValidationResult=function(n){return new e(t.pending,n)},valerie.ValidationResult.passed=new e(t.passed,""),valerie.ValidationResult.pending=new e(t.pending,"")})(),function(){"use strict";var e=valerie.utils=valerie.utils||{};e.asFunction=function(t){return e.isFunction(t)?t:function(){return t}},e.isArray=function(e){return"[object Array]"==={}.toString.call(e)},e.isArrayOrObject=function(e){return null===e?!1:"object"==typeof e},e.isFunction=function(e){return null==e?!1:"function"==typeof e},e.isMissing=function(e){return null==e?!0:0===e.length?!0:!1},e.isObject=function(t){return null===t?!1:e.isArray(t)?!1:"object"==typeof t},e.isString=function(e){return"[object String]"==={}.toString.call(e)},e.mergeOptions=function(t,n){var i,a,r={};null==t&&(t={}),null==n&&(n={});for(i in t)t.hasOwnProperty(i)&&(a=t[i],e.isArray(a)&&(a=a.slice(0)),r[i]=a);for(i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r}}(),function(){"use strict";var e=valerie.formatting=valerie.formatting||{};e.addThousandsSeparator=function(e,t,n){var i=(""+e).split(n),a=i[0];return a=a.replace(/\B(?=(\d{3})+(?!\d))/g,t),i[0]=a,i.join(n)},e.replacePlaceholders=function(e,t){return null==t&&(t={}),e.replace(/\{(\w+)\}/g,function(e,n){var i=t[n];return null==i?e:""+i})},e.pad=function(e,t,n){return e=""+e,e.length>=n?e:Array(n+1-e.length).join(t)+e}}(),function(){"use strict";var e=valerie.converters=valerie.converters||{};e.passThrough={formatter:function(e){return null==e?"":""+e},parser:function(e){return e}}}(),function(){"use strict";var e=valerie.knockout=valerie.knockout||{},t=e.extras=e.extras||{};t.isolatedBindingHandler=function(e,t){var n=1===arguments.length?function(){}:e;return t=2===arguments.length?t:e,{init:function(e,i,a,r,s){n(e,i,a,r,s),ko.computed({read:function(){t(e,i,a,r,s)},disposeWhenNodeIsRemoved:e})}}},t.pausableComputed=function(e,t,n,i){var a,r,s;return r=null==i?ko.observable(!1):ko.utils.isSubscribable(i)?i:ko.observable(i),s=ko.computed(function(){return r()?a:e.call(t)},t,n),s.paused=ko.computed({read:function(){return r()},write:function(e){e&&(e=!0),e!==r()&&(e&&(a=s()),r(e))}}),s.refresh=function(){r()&&(r(!1),a=s(),r(!0))},s}}(),function(){"use strict";var e=valerie.dom=valerie.dom||{},t=/\s+/g,n=/^\s+|\s+$/g;e.classNamesStringToDictionary=function(e){var i,a,r={};if(null==e)return r;for(e=e.replace(n,""),i=e.split(t),a=0;i.length>a;a++)r[i[a]]=!0;return r},e.classNamesDictionaryToString=function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&e[t]&&n.push(t);return n.sort(),n.join(" ")},e.setElementVisibility=function(e,t){var n="none"!==e.style.display;n!==t&&(e.style.display=t?"":"none")}}(),function(){"use strict";var e,t=valerie.FailedValidationResult,n=valerie.ValidationResult.passed,i=valerie.ValidationResult.pending,a=ko.observable,r=ko.computed,s=valerie.utils,u=valerie.formatting,o=valerie.knockout,l=o.extras,d={deferEvaluation:!0},c="validation";o.findValidationStates=function(e,t,n,i){1 in arguments||(t=!0),2 in arguments||(n=!1),3 in arguments||(i=[]);var a,r,u;for(a in e)if(e.hasOwnProperty(a)){if(u=e[a],null==u)continue;if(r=o.getValidationState(u),ko.isObservable(u)&&(u=u.peek()),s.isFunction(u))continue;s.isArrayOrObject(u)?(t&&r&&i.push(r),n&&o.findValidationStates(u,t,!0,i)):r&&i.push(r)}return i},o.getValidationState=function(e){return null==e?null:e.hasOwnProperty(c)?e[c]():null},o.hasValidationState=function(e){return null==e?!1:e.hasOwnProperty(c)},o.setValidationState=function(e,t){e[c]=function(){return t}},o.validatableModel=function(e,t){var n=new o.ModelValidationState(e,t);return o.setValidationState(e,n),n},o.validatableProperty=function(e,t){if(!ko.isSubscribable(e))throw"Only observables or computeds can be made validatable properties.";var n=new o.PropertyValidationState(e,t);return o.setValidationState(e,n),n},a.fn.validate=r.fn.validate=function(e){return o.validatableProperty(this,e)},function(){var u=function(){return this.result().failed},c=function(){var e,t,n,i=[],a=this.validationStates();for(n=0;a.length>n;n++)e=a[n],e.settings.applicable()&&(t=e.result(),t.failed&&i.push(e));return i},f=function(){return this.result().message},h=function(){return this.result().passed},m=function(){return this.result().pending},g=function(){var e,t,n=[],i=this.validationStates();for(t=0;i.length>t;t++)e=i[t],e.result().pending&&n.push(e);return n},p=function(){return this.failedStates().length>0?new t(this.settings.failureMessageFormat):this.pendingStates().length>0?i:n},v=function(){var e,t=this.validationStates();for(e=0;t.length>e;e++)if(t[e].touched())return!0;return!1},y=function(e){var t,n=this.validationStates();for(t=0;n.length>t;t++)n[t].touched(e)};e=o.ModelValidationState=function(e,t){t=s.mergeOptions(o.ModelValidationState.defaultOptions,t),t.applicable=s.asFunction(t.applicable),t.name=s.asFunction(t.name),this.model=e,this.settings=t,this.summary=a([]),this.validationStates=ko.observableArray(),this.failed=r(u,this,d),this.failedStates=r(c,this,d),this.message=r(f,this,d),this.passed=r(h,this,d),this.pending=r(m,this,d),this.pendingStates=r(g,this,d),this.result=l.pausableComputed(p,this,d,t.paused),this.touched=r({read:v,write:y,deferEvaluation:!0,owner:this}),this.paused=this.result.paused,this.refresh=this.result.refresh},e.prototype={addValidationStates:function(e){return this.validationStates.push.apply(this.validationStates,e),this},applicable:function(e){return null==e&&(e=!0),this.settings.applicable=s.asFunction(e),this},clearSummary:function(e){var t,n,i;if(this.summary([]),e)for(t=this.validationStates(),i=0;t.length>i;i++)n=t[i],n.clearSummary&&n.clearSummary();return this},name:function(e){return this.settings.name=s.asFunction(e),this},end:function(){return this.model},removeValidationStates:function(e){return this.validationStates.removeAll(e),this},stopValidatingSubModel:function(e){return this.validationStates.removeAll(e.validation().validationStates.peek()),this},updateSummary:function(e){var t,n,i=this.failedStates(),a=[];for(n=0;i.length>n;n++)t=i[n],a.push({name:t.settings.name(),message:t.message()});if(this.summary(a),e)for(i=this.validationStates(),n=0;i.length>n;n++)t=i[n],t.updateSummary&&t.updateSummary();return this},validateAll:function(){var e=o.findValidationStates(this.model,!0,!0);return this.addValidationStates(e),this},validateAllProperties:function(){var e=o.findValidationStates(this.model,!1,!0);return this.addValidationStates(e),this},validateMyProperties:function(){var e=o.findValidationStates(this.model,!1,!1);return this.addValidationStates(e),this},validateMyPropertiesAndSubModels:function(){var e=o.findValidationStates(this.model,!0,!1);return this.addValidationStates(e),this}},e.defaultOptions={applicable:s.asFunction(!0),failureMessageFormat:"",name:s.asFunction("(?)"),paused:null}}(),function(){var i=function(){var e=this.observableOrComputed(),t=this.settings.missingTest(e),n=this.settings.required();return t&&n?-1:t&&!n?0:1},c=function(){var e,t,i,a=this.observableOrComputed(),r=this.settings.rules;for(i=0;r.length>i;i++)if(e=r[i],t=e.test(a),t.failed||t.pending)return t;return n},f=function(){return this.result().failed},h=function(){var e=this.result().message;return e=u.replacePlaceholders(e,{name:this.settings.name()})},m=function(){return this.result().passed},g=function(){return this.result().pending},p=function(){var e,n;return n=this.boundEntry.result(),n.failed?n:(e=i.apply(this),-1===e?new t(this.settings.missingFailureMessage):0===e?n:c.apply(this))},v=function(){return this.settings.applicable()?this.touched()&&this.result().failed:!1};e=o.PropertyValidationState=function(e,t){t=s.mergeOptions(o.PropertyValidationState.defaultOptions,t),t.applicable=s.asFunction(t.applicable),t.name=s.asFunction(t.name),t.required=s.asFunction(t.required),this.boundEntry={focused:a(!1),result:a(n),textualInput:!1},this.observableOrComputed=e,this.settings=t,this.touched=a(!1),this.failed=r(f,this,d),this.message=l.pausableComputed(h,this,d),this.passed=r(m,this,d),this.pending=r(g,this,d),this.result=r(p,this,d),this.showMessage=l.pausableComputed(v,this,d)},e.prototype={addRule:function(e){return this.settings.rules.push(e),this},applicable:function(e){return null==e&&(e=!0),this.settings.applicable=s.asFunction(e),this},end:function(){var e,t,n=this.settings,i=n.valueFormat,a=n.converter.formatter,r=n.rules;for(e=0;r.length>e;e++)t=r[e].settings,t.valueFormat=i,t.valueFormatter=a;return this.observableOrComputed},name:function(e){return this.settings.name=s.asFunction(e),this},required:function(e){return null==e&&(e=!0),this.settings.required=s.asFunction(e),this},valueFormat:function(e){return this.settings.valueFormat=e,this}},e.defaultOptions={applicable:s.asFunction(!0),converter:valerie.converters.passThrough,entryFormat:null,invalidEntryFailureMessage:"",missingFailureMessage:"",missingTest:s.isMissing,name:s.asFunction(),required:s.asFunction(!1),rules:[],valueFormat:null}}()}(),function(){"use strict";var e=valerie.FailedValidationResult,t=valerie.ValidationResult.passed,n=valerie.utils,i=valerie.dom,a=valerie.knockout,r=valerie.converters,s=ko.bindingHandlers,u=ko.utils.registerEventHandler,o=i.setElementVisibility,l=a.getValidationState,d=valerie.knockout.extras.isolatedBindingHandler;(function(){var i,r,o=s.checked,d=s.value,c=function(e,t){var n=l(t);n.touched(!0),n.boundEntry.focused(!1),n.message.paused(!1),n.showMessage.paused(!1)},f=function(e,t){var n,i=l(t);i.boundEntry.result.peek().failed||(n=t.peek(),e.value=i.settings.converter.formatter(n,i.settings.entryFormat))},h=function(e,t){var n=l(t);n.boundEntry.focused(!0),n.message.paused(!0),n.showMessage.paused(!0)},m=function(n,i){var a,r=ko.utils.stringTrim(n.value),s=l(i),u=s.settings,o=t;0===r.length?(i(null),u.required()&&(o=new e(u.missingFailureMessage))):(a=u.converter.parser(r),i(a),null==a&&(o=new e(u.invalidEntryFailureMessage))),s.boundEntry.result(o)},g=function(e,n,i){var a=e();n.boundEntry.focused.peek()||(n.boundEntry.result(t),i.value=n.settings.converter.formatter(a,n.settings.entryFormat))};i=s.validatedChecked={init:function(e,t,i,a,r){var s=t(),d=l(s);o.init(e,t,i,a,r),d&&(u(e,"blur",function(){c(e,s)}),null==d.settings.name()&&(d.settings.name=n.asFunction(e.name)))},update:o.update},r=s.validatedValue={init:function(e,t,i,a,r){var s,o,p=t(),v=l(p);return v?(null==v.settings.name()&&(v.settings.name=n.asFunction(e.name)),u(e,"blur",function(){c(e,p)}),s=ko.utils.tagNameLower(e),(o="input"===s&&"text"===e.type.toLowerCase()||"textarea"===s)?(v.boundEntry.textualInput=!0,u(e,"blur",function(){f(e,p)}),u(e,"focus",function(){h(e,p)}),u(e,"keyup",function(){m(e,p)}),ko.computed({read:function(){g(p,v,e)},disposeWhenNodeIsRemoved:e}),void 0):(d.init(e,t,i,a,r),void 0)):(d.init(e,t,i,a,r),void 0)},update:function(e,t,n,i,a){var r=t(),s=l(r);s&&s.boundEntry.textualInput||d.update(e,t,n,i,a)}},a.originalBindingHandlers={checked:o,value:d},a.validatingBindingHandlers={checked:i,value:r},a.useValidatingBindingHandlers=function(){return s.checked=i,s.value=r,s.koChecked=o,s.koValue=d,a},a.useOriginalBindingHandlers=function(){return s.checked=o,s.value=d,a}})(),function(){var e=function(e,t,n,i,a){var r,s=i(),u=n();u===!0&&(u=s.value||s.checked||s.validatedValue||s.validatedChecked||a),r=l(u),r&&e(r,u,s)};s.disabledWhenNotValid=d(function(t,n,i,a){var r=function(e){t.disabled=!e.passed()};e(r,t,n,i,a)}),s.disabledWhenTouchedAndNotValid=d(function(t,n,i,a){var r=function(e){t.disabled=e.touched()&&!e.passed()};e(r,t,n,i,a)}),s.enabledWhenApplicable=d(function(t,n,i,a){var r=function(e){t.disabled=!e.settings.applicable()};e(r,t,n,i,a)}),s.formattedValue=d(function(e,t,n){var i,a=n(),s=t(),u=ko.utils.unwrapObservable(s),o=l(s),d=r.passThrough.formatter;o&&(d=o.settings.converter.formatter,i=o.settings.valueFormat),d=a.formatter||d,null==i&&(i=a.valueFormat),ko.utils.setTextContent(e,d(u,i))}),s.validationCss=d(function(t,n,a,r){var u=function(e){var n=s.validationCss.classNames,a=t.className,r=i.classNamesStringToDictionary(a),u=e.failed(),o=!1,l=e.passed(),d=e.pending(),c=e.touched(),f=!c;e.boundEntry&&e.boundEntry.focused()&&(o=!0),r[n.failed]=u,r[n.focused]=o,r[n.passed]=l,r[n.pending]=d,r[n.touched]=c,r[n.untouched]=f,t.className=i.classNamesDictionaryToString(r)};e(u,t,n,a,r)}),s.validationCss.classNames={failed:"error",focused:"focused",passed:"success",pending:"waiting",touched:"touched",untouched:"untouched"},s.validationMessageFor=d(function(t,n,i,a){var r=function(e){o(t,e.showMessage()),ko.utils.setTextContent(t,e.message())};e(r,t,n,i,a)}),s.visibleWhenFocused=d(function(t,n,i,a){var r=function(e){o(t,e.focused())};e(r,t,n,i,a)}),s.visibleWhenInvalid=d(function(t,n,i,a){var r=function(e){o(t,e.failed())};e(r,t,n,i,a)}),s.visibleWhenSummaryNotEmpty=d(function(t,n,i,a){var r=function(e){o(t,e.summary().length>0)};e(r,t,n,i,a)}),s.visibleWhenTouched=d(function(t,n,i,a){var r=function(e){o(t,e.touched())};e(r,t,n,i,a)}),s.visibleWhenUntouched=d(function(t,n,i,a){var r=function(e){o(t,!e.touched())};e(r,t,n,i,a)}),s.visibleWhenValid=d(function(t,n,i,a){var r=function(e){o(t,e.passed())};e(r,t,n,i,a)})}()}(),function(){"use strict";var e=valerie.formatting,t=function(e,t){var n=t.indexOf("C")>-1,i=t.indexOf(",")>-1,a=t.indexOf("."),r=0;return a===t.length-1?r=null:a>-1&&(r="c"===t.charAt(a+1)?e.settings.currencyMinorUnitPlaces:Number(t.substr(a+1))),{includeCurrencySign:n,includeThousandsSeparator:i,numberOfDecimalPlaces:r}};valerie.NumericHelper=function(){},valerie.NumericHelper.prototype={init:function(e,t,n,i){var a="\\d+(\\"+t+"\\d{3})*",r="(\\"+n+")?"+a,s=r+"(\\"+e+"\\d{"+i+"})?",u=a+"(\\"+e+"\\d+)?";return this.settings={decimalSeparator:e,thousandsSeparator:t,currencySign:n,currencyMinorUnitPlaces:i},this.expressions={currencyMajor:RegExp("^"+r+"$"),currencyMajorMinor:RegExp("^"+s+"$"),"float":RegExp("^"+u+"$"),integer:RegExp("^"+a+"$")},this},addThousandsSeparator:function(t){var n=this.settings;return e.addThousandsSeparator(t,n.thousandsSeparator,n.decimalSeparator)},format:function(e,n){if(null==e)return"";null==n&&(n="");var i=this.settings,a=t(this,n),r=a.numberOfDecimalPlaces,s=0>e;return s&&(e=-e),e=null!=r?e.toFixed(r):""+e,e=e.replace(".",i.decimalSeparator),a.includeThousandsSeparator&&(e=this.addThousandsSeparator(e)),(s?"-":"")+(a.includeCurrencySign?i.currencySign:"")+e},isCurrencyMajor:function(e){return this.expressions.currencyMajor.test(e)},isCurrencyMajorMinor:function(e){return this.expressions.currencyMajorMinor.test(e)},isFloat:function(e){return this.expressions.float.test(e)},isInteger:function(e){return this.expressions.integer.test(e)},parse:function(e){return e=this.unformat(e),Number(e)},unformat:function(e){var t=this.settings;return e=e.replace(t.currencySign,""),e=e.replace(t.thousandsSeparator,""),e=e.replace(t.decimalSeparator,".")}}}(),function(){"use strict";var e=valerie.formatting.pad,t=valerie.converters=valerie.converters||{},n=new valerie.NumericHelper,i=/^(\d\d?)(?:\-|\/)(\d\d?)(?:\-|\/)(\d\d\d\d)$/,a=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;t.date={formatter:function(n){if(null==n)return"";var i,a;return t.date.monthBeforeDate?(i=n.getMonth()+1,a=n.getDate()):(i=n.getDate(),a=n.getMonth()+1),e(i,"0",2)+"/"+e(a,"0",2)+"/"+n.getFullYear()},parser:function(e){if(null==e)return null;var n=e.match(i);if(null==n)return null;var a,r,s=parseInt(n[1],10),u=parseInt(n[2],10),o=parseInt(n[3],10);return t.date.monthBeforeDate?(a=u,r=s):(a=s,r=u),r--,e=new Date(o,r,a),e.getFullYear()!==o||e.getMonth()!==r||e.getDate()!==a?null:e}},t.date.monthBeforeDate=!1,t.defaultNumericHelper=n,t.currencyMajor={formatter:function(e,n){return t.currency.numericHelper.format(e,n)},parser:function(e){var n=t.currency.numericHelper;return n.isCurrencyMajor(e)?n.parse(e):null}},t.currencyMajorMinor={formatter:function(e,n){return t.currency.numericHelper.format(e,n)},parser:function(e){var n=t.currency.numericHelper;return n.isCurrencyMajorMinor(e)?n.parse(e):null}},t.currency={numericHelper:n},t.email={formatter:function(e){return null==e?"":e},parser:function(e){return null==e?null:a.test(e)?e.toLowerCase():null}},t.float={formatter:function(e,n){return t.float.numericHelper.format(e,n)},parser:function(e){var n=t.float.numericHelper;return n.isFloat(e)?n.parse(e):null}},t.float.numericHelper=n,t.integer={formatter:function(e,n){return t.integer.numericHelper.format(e,n)},parser:function(e){var n=t.integer.numericHelper;return n.isInteger(e)?n.parse(e):null}},t.integer.numericHelper=n,t.number={formatter:function(e){return null==e?"":""+e},parser:function(e){return null==e?null:(e=Number(e),isNaN(e)?null:e)}}}(),function(){"use strict";var e=valerie.FailedValidationResult,t=valerie.ValidationResult.passed,n=valerie.rules=valerie.rules||{},i=valerie.utils,a=valerie.formatting;n.ArrayLength=function(e,t,a){if(2>arguments.length)throw"At least 2 arguments are expected.";return a=i.mergeOptions(n.ArrayLength.defaultOptions,a),new n.Length(e,t,a)},n.ArrayLength.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.During=function(e,t,a){if(2>arguments.length)throw"At least 2 arguments are expected.";return a=i.mergeOptions(n.During.defaultOptions,a),new n.Range(e,t,a)},n.During.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.Expression=function(e,t){this.expression=i.isString(e)?RegExp(e):e,this.settings=i.mergeOptions(n.Expression.defaultOptions,t)},n.Expression.defaultOptions={failureMessageFormat:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.Expression.prototype={test:function(n){var i;return null!=n&&this.expression.test(n)?t:(i=a.replacePlaceholders(this.settings.failureMessageFormat,{value:this.settings.valueFormatter(n,this.settings.valueFormat)}),new e(i))}},n.Length=function(e,t,a){if(2>arguments.length)throw"At least 2 arguments are expected.";a=i.mergeOptions(n.Length.defaultOptions,a);var r=new n.Range(e,t,a);this.test=function(e){var t;return null!=e&&e.hasOwnProperty("length")&&(t=e.length),r.test(t)}},n.Length.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.Matches=function(e,t){return t=i.mergeOptions(n.Matches.defaultOptions,t),new n.OneOf([e],t)},n.Matches.defaultOptions={failureMessageFormat:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.NoneOf=function(e,t){this.forbiddenValues=i.asFunction(e),this.settings=i.mergeOptions(n.NoneOf.defaultOptions,t)},n.NoneOf.defaultOptions={failureMessageFormat:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.NoneOf.prototype={test:function(n){var i,r,s=this.forbiddenValues();for(r=0;s.length>r;r++)if(n===s[r])return i=a.replacePlaceholders(this.settings.failureMessageFormat,{value:this.settings.valueFormatter(n,this.settings.valueFormat)}),new e(i);return t}},n.Not=function(e,t){return t=i.mergeOptions(n.Not.defaultOptions,t),new n.NoneOf([e],t)},n.Not.defaultOptions={failureMessageFormat:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.OneOf=function(e,t){this.permittedValues=i.asFunction(e),this.settings=i.mergeOptions(n.OneOf.defaultOptions,t)},n.OneOf.defaultOptions={failureMessageFormat:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.OneOf.prototype={test:function(n){var i,r,s=this.permittedValues();for(r=0;s.length>r;r++)if(n===s[r])return t;return i=a.replacePlaceholders(this.settings.failureMessageFormat,{value:this.settings.valueFormatter(n,this.settings.valueFormat)}),new e(i)}},n.Range=function(e,t,a){if(2>arguments.length||arguments.length>3)throw"At least 2 arguments are expected.";this.minimum=i.asFunction(e),this.maximum=i.asFunction(t),this.settings=i.mergeOptions(n.Range.defaultOptions,a)},n.Range.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter},n.Range.prototype={test:function(n){var i,r=this.settings.failureMessageFormat,s=this.maximum(),u=this.minimum(),o=null!=s,l=null!=u,d=null!=n,c=!0;return o||l?(d?(o?c=s>=n:r=this.settings.failureMessageFormatForMinimumOnly,l?c=c&&n>=u:r=this.settings.failureMessageFormatForMaximumOnly):c=!1,c?t:(i=a.replacePlaceholders(r,{maximum:this.settings.valueFormatter(s,this.settings.valueFormat),minimum:this.settings.valueFormatter(u,this.settings.valueFormat),value:this.settings.valueFormatter(n,this.settings.valueFormat)}),new e(i))):t}},n.StringLength=function(e,t,a){if(2>arguments.length)throw"At least 2 arguments are expected.";return a=i.mergeOptions(n.StringLength.defaultOptions,a),new n.Length(e,t,a)},n.StringLength.defaultOptions={failureMessageFormat:"",failureMessageFormatForMinimumOnly:"",failureMessageFormatForMaximumOnly:"",valueFormat:null,valueFormatter:valerie.converters.passThrough.formatter}}(),function(){"use strict";var e=valerie.utils,t=valerie.converters,n=valerie.knockout.PropertyValidationState.prototype;n.currencyMajor=function(n){return n=e.mergeOptions(this.currencyMajor.defaultOptions,n),this.settings=e.mergeOptions(this.settings,n),this.settings.converter=t.currencyMajor,this},n.currencyMajor.defaultOptions={entryFormat:null,valueFormat:"C,"},n.currencyMajorMinor=function(n){return n=e.mergeOptions(this.currencyMajorMinor.defaultOptions,n),this.settings=e.mergeOptions(this.settings,n),this.settings.converter=t.currencyMajorMinor,this},n.currencyMajorMinor.defaultOptions={entryFormat:".c",valueFormat:"C,.c"},n.date=function(){return this.settings.converter=t.date,this},n.email=function(){return this.settings.converter=t.email,this},n.float=function(n){return n=e.mergeOptions(this.float.defaultOptions,n),this.settings=e.mergeOptions(this.settings,n),this.settings.converter=t.float,this},n.float.defaultOptions={entryFormat:null,valueFormat:",."},n.integer=function(n){return n=e.mergeOptions(this.integer.defaultOptions,n),this.settings=e.mergeOptions(this.settings,n),this.settings.converter=t.integer,this},n.integer.defaultOptions={entryFormat:null,valueFormat:","},n.number=function(){return this.settings.converter=t.number,this},n.string=function(){return this.settings.converter=t.passThrough,this}}(),function(){"use strict";var e=valerie.knockout.PropertyValidationState.prototype,t=valerie.rules;e.during=function(e,n,i){return this.addRule(new t.During(e,n,i))},e.earliest=function(e,n){return this.addRule(new t.During(e,null,n))},e.expression=function(e,n){return this.addRule(new t.Expression(e,n))},e.latest=function(e,n){return this.addRule(new t.During(null,e,n))},e.length=function(e,n,i){return this.addRule(new t.StringLength(e,n,i))},e.matches=function(e,n){return this.addRule(new t.Matches(e,n))},e.maximum=function(e,n){return this.addRule(new t.Range(null,e,n))},e.maximumNumberOfItems=function(e,n){return this.addRule(new t.ArrayLength(null,e,n))},e.maximumLength=function(e,n){return this.addRule(new t.StringLength(null,e,n))},e.ruleMessage=function(e){var t,n=this.settings.rules,i=n.length-1;return i>=0&&(t=n[i],t.settings.failureMessageFormat=e),this},e.minimum=function(e,n){return this.addRule(new t.Range(e,null,n))},e.minimumNumerOfItems=function(e,n){return this.addRule(new t.ArrayLength(e,null,n))},e.minimumLength=function(e,n){return this.addRule(new t.StringLength(e,null,n))},e.noneOf=function(e,n){return this.addRule(new t.NoneOf(e,n))},e.not=function(e,n){return this.addRule(new t.Not(e,n))},e.numberOfItems=function(e,n,i){return this.addRule(new t.ArrayLength(e,n,i))},e.oneOf=function(e,n){return this.addRule(new t.OneOf(e,n))},e.range=function(e,n,i){return this.addRule(new t.Range(e,n,i))},e.rule=function(e){return this.addRule({settings:{},test:function(t){return e(t)}})}}(),function(){"use strict";var e,t=valerie.knockout;t.ModelValidationState.defaultOptions.failureMessageFormat="There are validation errors.",e=t.PropertyValidationState.defaultOptions,e.invalidEntryFailureMessage="The value entered is invalid.",e.missingFailureMessage="A value is required."}(),function(){var e,t=valerie.converters,n=valerie.rules;t.defaultNumericHelper.init(".",",","£","2"),e=n.ArrayLength.defaultOptions,e.failureMessageFormat="There must be between {minimum} and {maximum} items.",e.failureMessageFormatForMinimumOnly="There must be at least {minimum} items.",e.failureMessageFormatForMaximumOnly="There must be at most {maximum} items.",e=n.During.defaultOptions,e.failureMessageFormat="The value must be between {minimum} and {maximum}.",e.failureMessageFormatForMinimumOnly="The value must be {minimum} at the earliest.",e.failureMessageFormatForMaximumOnly="The value must be {maximum} at the latest.",e=n.Expression.defaultOptions,e.failureMessageFormat="The value is invalid.",e=n.Length.defaultOptions,e.failureMessageFormat="The length must be between {minimum} and {maximum}.",e.failureMessageFormatForMinimumOnly="The length must be no less than {minimum}.",e.failureMessageFormatForMaximumOnly="The length must be no greater than {maximum}.",e=n.Matches.defaultOptions,e.failureMessageFormat="The value does not match.",e=n.NoneOf.defaultOptions,e.failureMessageFormat="The value is not allowed.",e=n.Not.defaultOptions,e.failureMessageFormat="The value is not allowed.",e=n.OneOf.defaultOptions,e.failureMessageFormat="The value does not match.",e=n.Range.defaultOptions,e.failureMessageFormat="The value must be between {minimum} and {maximum}.",e.failureMessageFormatForMinimumOnly="The value must be no less than {minimum}.",e.failureMessageFormatForMaximumOnly="The value must be no greater than {maximum}.",e=n.StringLength.defaultOptions,e.failureMessageFormat="The value must have between {minimum} and {maximum} characters.",e.failureMessageFormatForMinimumOnly="The value must have at least {minimum} characters.",e.failureMessageFormatForMaximumOnly="The value have at most {maximum} characters."}(),function(){"use strict";var e=valerie.converters=valerie.converters||{},t=/^([A-Z][A-Z]?)((?:[0-9][A-Z])|(?:[0-9]{1,2}))\s*([0-9])([A-Z][A-Z])$/i;e.postcode={formatter:function(e){return null==e?"":e},parser:function(e){if(null==e)return null;var n=e.match(t);return null==n?null:(n[1]+n[2]+" "+n[3]+n[4]).toUpperCase()}}}(),function(){"use strict";var e=valerie.converters,t=valerie.knockout.PropertyValidationState.prototype;t.postcode=function(){return this.settings.converter=e.postcode,this}}();